<!-- <!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Found Items â€” Smart Lost & Found</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <header><h2>Found Items</h2></header>
      <div id="itemsGrid" class="grid"></div>
      <p style="margin-top: 24px;"><a href="index.html" class="btn" style="background-color: var(--text-muted);">Back to Home</a></p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script src="firebase.js"></script>
    <script src="view_items.js"></script>

  </body>
</html> -->



<!-- Code given by gemini -->

<!-- <!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Found Items â€” Smart Lost & Found</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <header><h2>Found Items</h2></header>
      <div id="itemsGrid" class="grid"></div>
      <p style="margin-top: 24px;"><a href="index.html" class="btn" style="background-color: var(--text-muted);">Back to Home</a></p>
    </div>

    <script type="module" src="view_items.js"></script>

  </body>
</html>
  -->













  <!-- <!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Found Items â€” Smart Lost & Found</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <header><h2>Found Items</h2></header>
      
      <div id="statusLog" style="background: #f0f0f0; padding: 10px; margin-bottom: 20px; font-family: monospace; font-size: 12px; display: none;"></div>

      <div id="itemsGrid" class="grid">
        <p>Loading items...</p>
      </div>
      
      <p style="margin-top: 24px;"><a href="index.html" class="btn" style="background-color: var(--text-muted);">Back to Home</a></p>
    </div>

    <script type="module">
      // 1. Import Firebase from the Internet (CDN)
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
      import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore.js";
      import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js";

      // 2. Your Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBHqbuwOBlJBix9SgLFqYSLqFlXs7Uqup8",
        authDomain: "lost-and-found-17d0e.firebaseapp.com",
        projectId: "lost-and-found-17d0e",
        storageBucket: "lost-and-found-17d0e.firebasestorage.app",
        messagingSenderId: "746918449748",
        appId: "1:746918449748:web:6de9b7b1a1a68ae91f13c1"
      };

      // 3. Initialize
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const auth = getAuth(app);
      
      // Debug Helper
      const logDiv = document.getElementById('statusLog');
      function log(msg, color='black') {
        logDiv.style.display = 'block';
        console.log(msg);
        logDiv.innerHTML += `<div style="color:${color};">> ${msg}</div>`;
      }

      // 4. Load Data Function
      async function loadFound() {
        const itemsGrid = document.getElementById('itemsGrid');
        
        try {
          log("Querying database for found items...", "blue");
          const col = collection(db, "items");
          const q = query(col, where("type", "==", "found")); // Only get "Found" items
          
          const snapshot = await getDocs(q);
          
          if (snapshot.empty) {
            itemsGrid.innerHTML = '<p>No found items reported yet.</p>';
            log("Database connected, but 0 items found. (Did you add items as 'Lost' instead?)", "orange");
            return;
          }

          itemsGrid.innerHTML = ''; // Clear loading text
          log(`Success! Loaded ${snapshot.size} items.`, "green");

          snapshot.forEach(doc => {
            const d = doc.data();
            const card = document.createElement('div');
            card.className = 'card';
            const imgUrl = d.imageURL || 'https://via.placeholder.com/220x140?text=No+Image';
            
            card.innerHTML = `
              <img src="${imgUrl}" style="width:100%; height:160px; object-fit:cover;" onerror="this.src='https://via.placeholder.com/220x140?text=Error'"/>
              <div style="padding:10px;">
                <h3>${d.item_name}</h3>
                <p>${d.description || 'No description'}</p>
                <p><b>Location:</b> ${d.location || 'Unknown'}</p>
              </div>
            `;
            itemsGrid.appendChild(card);
          });

        } catch (error) {
          itemsGrid.innerHTML = `<p style="color:red">Error: ${error.message}</p>`;
          log(`CRITICAL ERROR: ${error.message}`, "red");
          if (error.message.includes("permission")) {
            log("FIX: Go to Firebase Console > Firestore > Rules and set to 'allow read, write: if true;'", "red");
          }
        }
      }

      // 5. Start
      onAuthStateChanged(auth, (user) => {
        if (user) log(`User detected: ${user.email}`, "green");
        else log("No user logged in (Guest mode)", "gray");
        loadFound();
      });

    </script>
  </body>
</html> -->


















<!-- <!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Found Items â€” Smart Lost & Found</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <header><h2>Found Items</h2></header>
      
      <div id="statusLog" style="background: #000; color: #0f0; padding: 10px; margin-bottom: 20px; font-family: monospace; font-size: 12px; border-radius: 4px;">
        > Page loaded. Waiting for script...
      </div>

      <div id="itemsGrid" class="grid">
        <p>Loading items...</p>
      </div>
      
      <p style="margin-top: 24px;"><a href="index.html" class="btn" style="background-color: var(--text-muted);">Back to Home</a></p>
    </div>

    <script type="module">
      // 1. Logger helper
      const logDiv = document.getElementById('statusLog');
      function log(msg) {
        console.log(msg);
        logDiv.innerHTML += `<div>> ${msg}</div>`;
      }

      log("Script started. Importing Firebase...");

      // 2. Import Firebase
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
      import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
      
      log("Imports successful. Configuring...");

      // 3. Config
      const firebaseConfig = {
        apiKey: "AIzaSyBHqbuwOBlJBix9SgLFqYSLqFlXs7Uqup8",
        authDomain: "lost-and-found-17d0e.firebaseapp.com",
        projectId: "lost-and-found-17d0e",
        storageBucket: "lost-and-found-17d0e.firebasestorage.app",
        messagingSenderId: "746918449748",
        appId: "1:746918449748:web:6de9b7b1a1a68ae91f13c1"
      };

      try {
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        log("Firebase initialized.");
        
        // 4. Run IMMEDIATELY (Do not wait for Auth)
        loadFound(db);
        
      } catch (e) {
        log("CRITICAL SETUP ERROR: " + e.message);
      }

      async function loadFound(db) {
        const itemsGrid = document.getElementById('itemsGrid');
        
        try {
          log("Querying 'items' collection...");
          const col = collection(db, "items");
          const q = query(col, where("type", "==", "found"));
          
          const snapshot = await getDocs(q);
          log(`Query complete. Documents found: ${snapshot.size}`);

          itemsGrid.innerHTML = ''; // Clear "Loading..."

          if (snapshot.empty) {
            itemsGrid.innerHTML = '<p>No found items reported yet.</p>';
            log("Displaying 'No items' message.");
            return;
          }

          snapshot.forEach(doc => {
            const d = doc.data();
            // Create Card
            const card = document.createElement('div');
            card.className = 'card';
            const imgUrl = d.imageURL || 'https://via.placeholder.com/220x140?text=No+Image';
            
            card.innerHTML = `
              <img src="${imgUrl}" style="width:100%; height:160px; object-fit:cover;" onerror="this.src='https://via.placeholder.com/220x140?text=Error'"/>
              <div style="padding:10px;">
                <h3>${d.item_name}</h3>
                <p>${d.description || 'No description'}</p>
                <p><b>Location:</b> ${d.location || 'Unknown'}</p>
              </div>
            `;
            itemsGrid.appendChild(card);
          });
          log("Items rendered successfully.");

        } catch (error) {
          itemsGrid.innerHTML = `<p style="color:red">Error: ${error.message}</p>`;
          log("ERROR LOADING ITEMS: " + error.message);
          if (error.message.includes("permission")) {
             log("TIP: Check Firestore Rules (allow read: if true)");
          }
        }
      }
    </script>
  </body>
</html> -->









<!-- Adding Contact Info Code -->
 













<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Found Items â€” Smart Lost & Found</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
      .item-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      .card {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.2s;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      }
      .card:hover { transform: translateY(-3px); }
      .card-img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        background: #f3f4f6;
      }
      .card-body { padding: 15px; }
      .tag {
        background: #def7ec; color: #03543f;
        padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;
        display: inline-block; margin-bottom: 10px;
      }
      h3 { margin: 0 0 5px 0; color: #111; }
      p { margin: 5px 0; color: #555; font-size: 0.9rem; }
      .contact-box {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #eee;
        font-weight: 500;
        color: #2563eb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header><h2>Recently Found Items</h2></header>

      <div id="loading" style="text-align: center; color: #666; margin-top: 20px;">Loading items from database...</div>
      <div id="itemsGrid" class="item-grid"></div>

      <p style="margin-top: 30px;"><a href="index.html" class="btn" style="background-color: var(--text-muted);">Back to Home</a></p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFirestore, collection, query, where, getDocs, orderBy } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBHqbuwOBlJBix9SgLFqYSLqFlXs7Uqup8",
            authDomain: "lost-and-found-17d0e.firebaseapp.com",
            projectId: "lost-and-found-17d0e",
            messagingSenderId: "746918449748",
            appId: "1:746918449748:web:6de9b7b1a1a68ae91f13c1"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function loadItems() {
            const grid = document.getElementById('itemsGrid');
            const loadingDiv = document.getElementById('loading');

            try {
                // QUERY: Show items where type == "found"
                const q = query(
                    collection(db, "items"), 
                    where("type", "==", "found"), 
                    orderBy("timestamp", "desc")
                );

                const querySnapshot = await getDocs(q);
                loadingDiv.style.display = 'none';

                if (querySnapshot.empty) {
                    grid.innerHTML = '<p style="grid-column: 1/-1; text-align:center;">No found items reported yet.</p>';
                    return;
                }

                grid.innerHTML = '';
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const card = document.createElement('div');
                    card.className = 'card';
                    // Show contact info (or "N/A" if it's an old item)
                    const contact = data.contact_info || "Not Provided";
                    
                    card.innerHTML = `
                        <img src="${data.imageURL}" class="card-img" alt="Item" onerror="this.src='https://placehold.co/400x300?text=No+Image'">
                        <div class="card-body">
                            <span class="tag">${data.category}</span>
                            <h3>${data.item_name}</h3>
                            <p>${data.description}</p>
                            <p><strong>Location:</strong> ${data.location}</p>
                            <div class="contact-box">ðŸ“ž Contact: ${contact}</div>
                        </div>
                    `;
                    grid.appendChild(card);
                });

            } catch (error) {
                console.error(error);
                loadingDiv.innerText = "Error loading items. Check console.";
            }
        }

        loadItems();
    </script>
  </body>
</html>